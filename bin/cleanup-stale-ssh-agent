#!/usr/bin/env bash

gpg-connect-agent /bye

declare -r timeout="12h"
declare -ra rsa_keys=(github git gh bb ssh lookout)
declare -ra dsa_keys=()

function add-ssh-keys() {
  local -r key_type="${1}"
  shift
  local -ra keys=("${@}")

  for t in "${keys[@]}"; do
    local key_file="${HOME}/.ssh/${t}.id_${key_type}"
    if [ -f "${key_file}" ]; then
      ssh-add -t${timeout} "${HOME}/.ssh/${t}.id_${key_type}"
    fi
  done
}

add-ssh-keys "rsa" "${rsa_keys[@]}"
add-ssh-keys "ed25519" "${rsa_keys[@]}"
